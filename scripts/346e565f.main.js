"use strict";function ProgressBar(){this.sectors=[],this.offColour=null,this.onColour=null,this.turnOffSector=function(a){this.sectors[a].attr({fill:this.offColour,stroke:this.offColour})},this.turnOnSector=function(a){this.sectors[a].attr({fill:this.onColour,stroke:this.onColour})}}Raphael.fn.createProgressBar=function(a,b,c,d,e,f,g){var h=Math.PI/180,i=this,j=360/e,k=function(a,b,c,d,e,f){var g=a+c*Math.sin(d*h),j=b-c*Math.cos(d*h),k=a+c*Math.sin(e*h),l=b-c*Math.cos(e*h);return i.path(["M",a,b,"L",g,j,"A",c,c,0,e-d>180?1:0,1,k,l,"Z"]).attr(f)},l=new ProgressBar;l.onColour=g,l.offColour=f;for(var m=0;360>m;m+=j)l.sectors.push(k(a,b,d,m,m+j,{stroke:f,fill:f}).mouseover(function(){this.stop().animate({transform:"s 1.5 1.5 "+a+" "+b})}).mouseout(function(){this.stop().animate({transform:""},450,"backOut")}));return i.circle(a,b,c).attr({fill:"#ffffff","stroke-width":"0"}),l.paper=i,l},function(){var a=null,b=function(a,b){a.find(".toggle").slideDown(100,function(){b&&a.find("input,textarea").last().focus()}),a.find("p").first().css({width:"100%","white-space":"normal"}),a.css({"padding-bottom":"20px"}),a.data("closed",!1)},c=function(a){a.find(".toggle").slideUp(),a.find("p").first().css({width:a.width(),"white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}),a.css({"padding-bottom":0}),a.data("closed",!0)},d=function(a){a.data("closed")?b(a,!0):c(a)},e=function(){var a=window.pageYOffset;$("fieldset").each(function(a,b){c($(b))}),window.scrollTo(0,a)},f=function(){var a=window.pageYOffset;$("fieldset").each(function(a,c){b($(c))}),window.scrollTo(0,a)},g=function(b){var c=b.children().first(),d=b.find("input,textarea"),e=!1;d.each(function(a,b){switch(b.type){case"textarea":case"text":if(b.value.length>0)return e=!0,!1;break;case"radio":if(b.checked)return e=!0,!1}});var f=c.children()[0];f.innerText=7===f.innerText/6?"7":f.innerText,e?(c.addClass("passed"),a&&a.turnOnSector(f.innerText-1)):(c.removeClass("passed"),a&&a.turnOffSector(f.innerText-1))};$(function(){var c=$(".question_mark");c.bind("click",function(){d($(this).parent())}),$(".expandAll").click(function(){f()}),$(".collapseAll").click(function(){e()}),$("fieldset").focusout(function(){var a=$(this);g(a)}),$("fieldset :radio").click(function(){var a=$(this).parents("fieldset");g(a)}),a=Raphael("progress",300,300).createProgressBar(120,120,20,50,15,"#e74c3c","#1abc9c"),c.each(function(c,d){a.sectors[c].click(function(){window.scrollTo(0,$(d).offset().top-155),b($(d).parent(),!0)})}),$("#fileUpload").change(function(){var a="";if(void 0===this.files){var b=this.value.split("\\");a=b[b.length-1]}else a=this.files[0].name;$(".file-name")[0].innerText=a}),$("#recommendBy").change(function(){"other"===this.value?($("#recommendOther").show(),$("#recommendOther").focus()):$("#recommendOther").hide()})})}();